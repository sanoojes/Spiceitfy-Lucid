(async function() {while (!Spicetify.React || !Spicetify.ReactDOM) {await new Promise(resolve => setTimeout(resolve, 10));}var lucid=(()=>{var zo=Object.create;var Ze=Object.defineProperty;var Zo=Object.getOwnPropertyDescriptor;var qo=Object.getOwnPropertyNames;var Jo=Object.getPrototypeOf,Yo=Object.prototype.hasOwnProperty;var Xo=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ko=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of qo(r))!Yo.call(e,n)&&n!==t&&Ze(e,n,{get:()=>r[n],enumerable:!(o=Zo(r,n))||o.enumerable});return e};var g=(e,r,t)=>(t=e!=null?zo(Jo(e)):{},Ko(r||!e||!e.__esModule?Ze(t,"default",{value:e,enumerable:!0}):t,e));var m=Xo((wn,qe)=>{qe.exports=Spicetify.React});var E=g(m()),Qo=(0,E.memo)(({title:e,children:r,headingChild:t,onClose:o,isOpen:n=!1})=>n?E.default.createElement("div",{className:"modal-container"},E.default.createElement("div",{className:`modal-overlay ${n&&"open"}`,style:{zIndex:20},onClick:o}),E.default.createElement("dialog",{open:n,className:`modal-section ${n&&"open"}`,"aria-label":e,"aria-modal":"true"},E.default.createElement("div",{className:"main-embedWidgetGenerator-container"},E.default.createElement("div",{className:"main-trackCreditsModal-header"},E.default.createElement("h1",{className:"encore-text encore-title-body-medium"},e),t&&E.default.createElement("div",null,t),E.default.createElement("button",{type:"button","aria-label":"Close",className:"main-trackCreditsModal-closeBtn",onClick:()=>o()},E.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},E.default.createElement("title",null,"Close"),E.default.createElement("path",{d:"M31.098 29.794L16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",fill:"currentColor","fill-rule":"evenodd"})))),E.default.createElement("div",{className:"modal-contents"},E.default.createElement("main",{className:"modal-wrapper"},r))))):null),ye=Qo;var pe=g(m()),er=({title:e,description:r,children:t})=>pe.default.createElement("div",{className:"setting-section"},pe.default.createElement("div",{className:"heading-wrapper"},pe.default.createElement("h3",{className:"title encore-text encore-text-title-small"},e),r&&pe.default.createElement("p",{className:"desc encore-text encore-text-body-small"},r)),t),$=er;var Je=[{label:"Animated",value:"animated"},{label:"Static",value:"static"},{label:"Solid",value:"solid"}],Ye=[{label:"Compact",value:"compact"},{label:"Default",value:"default"},{label:"Rounded",value:"rounded"}],Xe=[{label:"Starry",value:"starry"},{label:"Default",value:"default"},{label:"none",value:"none"}],Ke=[{label:"Now Playing",value:"now-playing"},{label:"Playlist Cover",value:"inherit"},{label:"none",value:"none"}],Qe=[{label:"Card",value:"card"},{label:"Compact Card",value:"compact-card"},{label:"Compact",value:"compact"},{label:"Default",value:"default"}],et=[{label:"None",value:"none"},{label:"Hidden",value:"hidden"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"},{label:"Solid",value:"solid"},{label:"Double",value:"double"},{label:"Groove",value:"groove"},{label:"Ridge",value:"ridge"},{label:"Inset",value:"inset"},{label:"Outset",value:"outset"}];var tt=[{label:"Profile Context Menu",value:"context-menu"},{label:"Global Nav",value:"nav"}],ot=[{label:"Compact",value:"compact"},{label:"Normal",value:"normal"}],rt=[{label:"Left",value:"left"},{label:"Right",value:"right"}];var Ae=g(m()),tr=()=>Ae.default.createElement("svg",{role:"img","aria-label":"dismiss",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ae.default.createElement("path",{d:"m4.21 4.387.083-.094a1 1 0 0 1 1.32-.083l.094.083L12 10.585l6.293-6.292a1 1 0 1 1 1.414 1.414L13.415 12l6.292 6.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.32.083l-.094-.083L12 13.415l-6.293 6.292a1 1 0 0 1-1.414-1.414L10.585 12 4.293 5.707a1 1 0 0 1-.083-1.32l.083-.094-.083.094Z",fill:"#ffffff"})),nt=tr;var Oe=g(m()),or=({variant:e="primary",size:r="medium",icon:t,children:o,...n})=>Oe.default.createElement("button",{className:`button button-${e} button-${r}`,...n},t&&Oe.default.createElement("span",{className:"button-icon"},t),o),H=or;var j=g(m()),rr=0,nr=(()=>{let e;return{ToastContainer:()=>{let[t,o]=(0,j.useState)([]);e=(0,j.useCallback)((a,s=!1)=>{let l=rr++;o(c=>[...c,{id:l,message:a,isError:s,exiting:!1}]);let d=setTimeout(()=>{i(l)},3e3);return()=>clearTimeout(d)},[]);let i=a=>{o(s=>s.map(l=>l.id===a?{...l,exiting:!0}:l)),setTimeout(()=>{o(s=>s.filter(l=>l.id!==a))},500)};return j.default.createElement("div",{className:"toast-container"},t.map(a=>j.default.createElement("div",{key:a.id,className:`toast-element ${a.exiting?"toast-exit":""}`,style:{backgroundColor:`${a.isError?"rgba(200,20,20,0.5)":"rgba(20,20,20,0.5)"}`}},a.message,j.default.createElement(H,{icon:j.default.createElement(nt,null),onClick:()=>i(a.id)}))))},addToast:(t,o)=>e(t,o)}})(),{ToastContainer:it,addToast:A}=nr;var at=e=>{let r,t=new Set,o=(d,c)=>{let p=typeof d=="function"?d(r):d;if(!Object.is(p,r)){let u=r;r=c??(typeof p!="object"||p===null)?p:Object.assign({},r,p),t.forEach(f=>f(r,u))}},n=()=>r,s={setState:o,getState:n,getInitialState:()=>l,subscribe:d=>(t.add(d),()=>t.delete(d))},l=r=e(o,n,s);return s},st=e=>e?at(e):at;var Re=g(m(),1);var ir=e=>e;function ar(e,r=ir){let t=Re.default.useSyncExternalStore(e.subscribe,()=>r(e.getState()),()=>r(e.getInitialState()));return Re.default.useDebugValue(t),t}var lt=e=>{let r=st(e),t=o=>ar(r,o);return Object.assign(t,r),t},re=e=>e?lt(e):lt;function sr(e,r){let t;try{t=e()}catch{return}return{getItem:n=>{var i;let a=l=>l===null?null:JSON.parse(l,r?.reviver),s=(i=t.getItem(n))!=null?i:null;return s instanceof Promise?s.then(a):a(s)},setItem:(n,i)=>t.setItem(n,JSON.stringify(i,r?.replacer)),removeItem:n=>t.removeItem(n)}}var De=e=>r=>{try{let t=e(r);return t instanceof Promise?t:{then(o){return De(o)(t)},catch(o){return this}}}catch(t){return{then(o){return this},catch(o){return De(o)(t)}}}},lr=(e,r)=>(t,o,n)=>{let i={storage:sr(()=>localStorage),partialize:y=>y,version:0,merge:(y,M)=>({...M,...y}),...r},a=!1,s=new Set,l=new Set,d=i.storage;if(!d)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...y)},o,n);let c=()=>{let y=i.partialize({...o()});return d.setItem(i.name,{state:y,version:i.version})},p=n.setState;n.setState=(y,M)=>{p(y,M),c()};let u=e((...y)=>{t(...y),c()},o,n);n.getInitialState=()=>u;let f,k=()=>{var y,M;if(!d)return;a=!1,s.forEach(h=>{var I;return h((I=o())!=null?I:u)});let b=((M=i.onRehydrateStorage)==null?void 0:M.call(i,(y=o())!=null?y:u))||void 0;return De(d.getItem.bind(d))(i.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==i.version){if(i.migrate){let I=i.migrate(h.state,h.version);return I instanceof Promise?I.then(F=>[!0,F]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var I;let[F,oe]=h;if(f=i.merge(oe,(I=o())!=null?I:u),t(f,!0),F)return c()}).then(()=>{b?.(f,void 0),f=o(),a=!0,l.forEach(h=>h(f))}).catch(h=>{b?.(void 0,h)})};return n.persist={setOptions:y=>{i={...i,...y},y.storage&&(d=y.storage)},clearStorage:()=>{d?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>k(),hasHydrated:()=>a,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||k(),f||u},Se=lr;var ct={isUseLocalImage:!1,selectedLocalImage:null},ne=re(Se(e=>({...ct,setUseLocalImage:r=>e(()=>({isUseLocalImage:r})),setSelectedLocalImage:r=>e(()=>({selectedLocalImage:r})),clearSelectedLocalImage:()=>e(()=>({...ct}))}),{name:"lucid-bg-image"}));var cr={solid:{opacity:1,backgroundColor:"var(--spice-main)"},static:{blur:32,opacity:1,saturation:1.1,contrast:1.2,brightness:.5},animated:{blur:32,time:45,opacity:1,saturation:1.1,contrast:1.2,brightness:.475}},dr={compact:{height:64,opacity:1,saturation:1.1,contrast:1.2,brightness:.8,borderRadius:8,backdropBlur:32,paddingX:6,backgroundColor:"rgba(var(--spice-rgb-player, var(--spice-rgb-card)), 0.5)"},default:{height:80,opacity:1,paddingX:6,saturation:1.1,contrast:1.2,borderRadius:8,brightness:.8,backdropBlur:32,backgroundColor:"rgba(var(--spice-rgb-player, var(--spice-rgb-card)), 0.5)"},rounded:{height:80,opacity:1,paddingX:20,saturation:1.1,contrast:1.2,borderRadius:999,brightness:.8,backdropBlur:32,backgroundColor:"rgba(var(--spice-rgb-player, var(--spice-rgb-card)), 0.5)"}},be={backgroundSettings:{mode:"static",styles:cr,customBackgroundOverride:{url:null}},interfaceSettings:{controlSettings:{height:64},fontSettings:{body:{url:"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap",fontFamily:"Poppins"}},grainSettings:{grainEffect:"default"},pagesSettings:{isScrollMode:!1,backgroundImageMode:"inherit",playlistViewMode:"card"},borderSettings:{color:"rgba(var(--spice-rgb-selected-row, var(--spice-rgb-text)), 0.125)",style:"inset",thickness:1,roundedRadius:12}},npvSettings:{mode:"normal",position:"right",blur:24},colorSettings:{isDynamicColor:!1},playbarSettings:{mode:"default",styles:dr},settingAccessPosition:"nav"};var pr=e=>typeof e=="object"&&e!==null&&"backgroundSettings"in e&&"interfaceSettings"in e&&"playbarSettings"in e&&"colorSettings"in e&&typeof e.backgroundSettings=="object"&&"mode"in e.backgroundSettings&&"styles"in e.backgroundSettings&&typeof e.interfaceSettings=="object"&&"borderSettings"in e.interfaceSettings&&"fontSettings"in e.interfaceSettings&&typeof e.playbarSettings=="object"&&"mode"in e.playbarSettings&&typeof e.colorSettings=="object"&&"isDynamicColor"in e.colorSettings,S=re(Se((e,r)=>({...be,exportSettings:()=>{let t=r();return JSON.stringify(t)},importSettings:t=>{try{let o=JSON.parse(t);if(!pr(o))throw new Error("Invalid settings structure");return e(o),A("Settings imported successfully!"),!0}catch(o){let n=o instanceof SyntaxError?"Failed to parse JSON: Please ensure your input is valid JSON.":o instanceof Error?o.message:"An unknown error occurred.";return A(n,!0),!1}},setBackgroundSettings:t=>e(o=>({backgroundSettings:{...o.backgroundSettings,...t}})),setNpvMode:t=>e(o=>({npvSettings:{...o.npvSettings,mode:t}})),setNpvBlur:t=>e(o=>({npvSettings:{...o.npvSettings,blur:t}})),setCompactNpvPosition:t=>e(o=>({npvSettings:{...o.npvSettings,position:t}})),setSettingAccessPosition:t=>e(()=>({settingAccessPosition:t})),setControlHeight:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,controlSettings:{height:t}}})),setCustomBackgroundOverride:t=>e(o=>({backgroundSettings:{...o.backgroundSettings,customBackgroundOverride:{...o.backgroundSettings.customBackgroundOverride,url:t}}})),setBorderColor:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,color:t}}})),setBorderStyle:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,style:t}}})),setRoundedBorderRadius:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,roundedRadius:t}}})),setBorderThickness:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,thickness:t}}})),setBackgroundStyles:(t,o)=>e(n=>({backgroundSettings:{...n.backgroundSettings,styles:{...n.backgroundSettings.styles,[o]:{...n.backgroundSettings.styles[o],...t}}}})),setColorSettings:t=>e(o=>({colorSettings:{...o.colorSettings,...t}})),setBorderSettings:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,...t}}})),setPlaybarSettings:t=>e(o=>({playbarSettings:{...o.playbarSettings,...t}})),setInterfaceSettings:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,...t}})),setBackgroundMode:t=>e(o=>({backgroundSettings:{...o.backgroundSettings,mode:t}})),updateBackgroundStyle:(t,o,n)=>e(i=>({backgroundSettings:{...i.backgroundSettings,styles:{...i.backgroundSettings.styles,[t]:{...i.backgroundSettings.styles[t],[o]:n}}}})),setFont:(t,o)=>e(n=>({interfaceSettings:{...n.interfaceSettings,fontSettings:{...n.interfaceSettings.fontSettings,[t]:{...o}}}})),setGrainEffect:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,grainSettings:{...o.interfaceSettings.grainSettings,grainEffect:t}}})),setIsScrollMode:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,pagesSettings:{...o.interfaceSettings.pagesSettings,isScrollMode:t}}})),setPagesBackgroundImageMode:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,pagesSettings:{...o.interfaceSettings.pagesSettings,backgroundImageMode:t}}})),setPlaylistViewMode:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,pagesSettings:{...o.interfaceSettings.pagesSettings,playlistViewMode:t}}})),setIsDynamicColor:t=>e(o=>({colorSettings:{...o.colorSettings,isDynamicColor:t}})),updatePlaybarStyle:(t,o,n)=>e(i=>({playbarSettings:{...i.playbarSettings,styles:{...i.playbarSettings.styles,[t]:{...i.playbarSettings.styles[t],[o]:n}}}})),setPlaybarMode:t=>e(o=>({playbarSettings:{...o.playbarSettings,mode:t}})),resetAllSettings:()=>{e(be)}}),{name:"lucid-settings",version:1.1,migrate:e=>({...be,...e})}));var Ue=e=>{try{return new URL(e),!0}catch{return!1}},ur=e=>decodeURIComponent(e.match(/family=([^&:]+)/)?.[1]?.replace(/\+/g," ")||"")||"",dt=(e,r)=>{let t=document.getElementById(r);t||(t=document.createElement("link"),t.rel="stylesheet",t.id=r,document.head.appendChild(t)),t.href=e},pt=e=>{let r="",t="";return Ue(e)?(t=e,r=ur(e)):(t=e,r=e),{url:t,fontFamily:r}};var he=(e,r,t)=>Object.entries(e[r]).map(([o,n])=>({id:`style-${r}`,sectionName:"Styles",conditionalRender:!0,cardProps:{title:`Set ${o}`,type:"input",settings:{label:"",defaultValue:n,...typeof n=="number"?{type:"number",onChange:i=>{t(r,o,Number(i))},settings:{max:256,min:0,step:.5}}:{type:"text",onChange:i=>{t(r,o,i)}}}}}));var mr=console.log,gr=console.debug,fr=console.error,yr=console.warn,ut={prefix:"font-weight: bold; color: #4DB6AC; font-size: 0.85rem;",error:"color: #dc3545;",warn:"color: #ffc107;",debug:"color: #17a2b8;",info:""},ve=(e,r,...t)=>{let o={info:mr,debug:gr,error:fr,warn:yr}[e],n=ut[e];o(`%c[Lucid] %c${r}`,ut.prefix,n,...t)},W=(e,...r)=>ve("info",e,...r),w=(e,...r)=>ve("debug",e,...r),C=(e,...r)=>ve("error",e,...r),we=(e,...r)=>ve("warn",e,...r);var K=g(m()),Sr=({children:e})=>K.default.createElement("div",{className:"tooltip-container"},K.default.createElement("div",{className:"tooltip"},K.default.createElement("span",{className:"tooltip-icon"},K.default.createElement("svg",{role:"img","aria-label":"Tooltip icon",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},K.default.createElement("path",{d:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-8.75a2.75 2.75 0 0 1 2.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 0 1-1.5 0c0-1.01.297-1.574 1.051-2.359l.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 0 0-2.493-.128l-.007.128a.75.75 0 0 1-1.5 0A2.75 2.75 0 0 1 12 6.75Z",fill:"currentColor"}))),K.default.createElement("span",{className:"tooltip-content"},e))),mt=Sr;var ie=g(m()),br=({title:e,tooltip:r,selectedValue:t})=>ie.default.createElement("div",{className:"title-container"},ie.default.createElement("div",{className:"title-wrapper"},e&&ie.default.createElement("h5",{className:"encore-text encore-text-body-medium-bold"},e),r&&ie.default.createElement(mt,null,r)),t&&ie.default.createElement("p",{className:"selected-value"},"Selected: ",t)),gt=br;var Fe=g(m()),hr=()=>Fe.default.createElement("svg",{role:"img","aria-label":"Arrow Down",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Fe.default.createElement("path",{d:"M4.293 8.293a1 1 0 0 1 1.414 0L12 14.586l6.293-6.293a1 1 0 1 1 1.414 1.414l-7 7a1 1 0 0 1-1.414 0l-7-7a1 1 0 0 1 0-1.414Z",fill:"#ffffff"})),ft=hr;var x=g(m()),vr=({options:e,selectedValue:r,onChange:t,placeholder:o,disabled:n})=>{let i=(0,x.useRef)(null),[a,s]=(0,x.useState)(!1),l=()=>{s(c=>!c)},d=c=>{s(!1),t(c)};return(0,x.useEffect)(()=>{let c=p=>{i.current&&!i.current.contains(p.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),x.default.createElement(x.default.Fragment,null,x.default.createElement("div",{className:"dropdown-container",ref:i},x.default.createElement("button",{className:`dropdown-button ${a?"open":""}`,onClick:l,"aria-label":"Toggle dropdown menu",type:"button"},x.default.createElement("p",{className:"encore-text"},o||r||"Dropdown"),x.default.createElement("span",{className:"dropdown-arrow"},x.default.createElement(ft,null))),x.default.createElement("div",{className:`dropdown-menu ${a?"open":""}`},a?e?.map(c=>x.default.createElement("li",{key:c.value,className:`dropdown-item ${r===c.value?"selected":""}`,onClick:()=>!c.disabled&&d(c.value),onKeyDown:p=>!c.disabled&&p.key==="Enter"&&d(c.value),style:{opacity:`${n?.75:1}`}},x.default.createElement("p",{className:"encore-text"},c.label))):null)))},yt=vr;var St=(e,r)=>{let t=null;return(...o)=>{t&&clearTimeout(t),t=setTimeout(()=>{e(...o)},r)}};var N=g(m()),wr=(0,N.forwardRef)(({label:e,defaultValue:r,onChange:t,type:o,placeholder:n,settings:i,validation:a},s)=>{let[l,d]=(0,N.useState)(r||null),[c,p]=(0,N.useState)(null),u=o==="file",f=o==="number",k=(0,N.useMemo)(()=>St(M=>{u||t?.(M)},1e3),[t,u]),y=(0,N.useCallback)(M=>{if(u){let b=M.target.files;t?.(b)}else if(f&&i){let b=Number(M.target.value),h=i.max??100,I=i.min??0;b>h?p(`Value cannot exceed ${h}`):b<I?p(`Value cannot be less than ${I}`):p(null);let F=Math.min(Math.max(b,I),h).toString();d(F),k(F)}else{let b=M.target.value;d(b),p(null),k(b)}},[k,i,u,f,t]);return(0,N.useEffect)(()=>{c&&A(c,!0)},[c]),N.default.createElement("div",{className:"input-container"},N.default.createElement("label",{"aria-label":e,className:u?"input":"label"},N.default.createElement("input",{"aria-label":e,type:o,accept:u?i?.accept??"image/*":void 0,multiple:u?i?.multiple??!1:void 0,className:"input encore-text",value:l??"",onChange:y,placeholder:n,step:f?i?.step??1:void 0,min:f?i?.min:void 0,max:f?i?.max:void 0,ref:s,style:u?{display:"none"}:{}}),u?"Upload Image":null))}),Ce=wr;var ue=g(m()),Cr=({onChange:e,checked:r,label:t})=>ue.default.createElement("div",{className:"slider-wrapper"},ue.default.createElement("label",{className:"switch","aria-label":t},ue.default.createElement("input",{"aria-label":"toggleSwtich",type:"checkbox",checked:r,onChange:()=>{e(!r)}}),ue.default.createElement("span",{className:"slider round"}))),bt=Cr;var z=g(m()),kr=({title:e,tooltip:r,selectedValue:t,type:o,settings:n,children:i,style:a})=>z.default.createElement("div",{className:"card"},z.default.createElement(gt,{title:e,tooltip:r,selectedValue:t}),z.default.createElement("div",{className:"children-wrapper",style:a||{}},o==="dropdown"&&z.default.createElement(yt,{...n}),o==="input"&&z.default.createElement(Ce,{...n}),o==="toggle"&&z.default.createElement(bt,{...n}),o==="button"&&z.default.createElement(H,{...n}),i)),me=kr;var ht=g(m()),Pr=e=>{let{children:r,className:t,...o}=e;return ht.default.createElement("div",{...o,className:`cards-wrapper ${t||""}`},r)},ke=Pr;var Q=g(m()),Z=e=>{let[r,t]=(0,Q.useState)(new Map);return Q.default.useEffect(()=>{let o=new Map;for(let n of e)o.has(n.id)||o.set(n.id,[]),o.get(n.id)?.push(n);t(o)},[e]),Array.from(r.entries()).map(([o,n])=>{let i=n.filter(a=>a.conditionalRender);return i.length>0?Q.default.createElement(ke,{key:o,id:o,className:`${o} combine`},i[0]?.sectionName?Q.default.createElement("label",{"aria-label":i[0]?.sectionName,htmlFor:o},i[0]?.sectionName):null,i.map(a=>Q.default.createElement(me,{key:a.id,...a.cardProps}))):null})};var P=g(m()),Mr=()=>{let{backgroundSettings:{mode:e,styles:r,customBackgroundOverride:t},colorSettings:{isDynamicColor:o},setBackgroundMode:n,updateBackgroundStyle:i,setIsDynamicColor:a,setCustomBackgroundOverride:s}=S(),{isUseLocalImage:l,setUseLocalImage:d,clearSelectedLocalImage:c,selectedLocalImage:p,setSelectedLocalImage:u}=ne(),[f,k]=(0,P.useState)(e),M=[{id:"backgroundOption",conditionalRender:!0,cardProps:{title:"Background Option",type:"dropdown",tooltip:"Select the background mode to customize your background.",settings:{placeholder:f,selectedValue:f,options:Je,onChange:b=>{k(b),n(b)}}}},...he(r,e,i),{id:"backgroundCustomImage",sectionName:"Custom Background",conditionalRender:e==="static",cardProps:{title:"Background image",type:"input",tooltip:P.default.createElement(P.default.Fragment,null,P.default.createElement("span",null,"Use a custom URL for the background image."),P.default.createElement("span",null,"Ensure the URL is a valid image link (e.g., .jpg, .png)."),P.default.createElement("span",null,'Use "now-playing" for the now playing art image.'),P.default.createElement("span",null,'Use "current-page" for the current page art image.')),settings:{type:"text",defaultValue:t?.url||"",label:"Url",validation:b=>Ue(b),onChange:b=>{s(b)}}}},{id:"backgroundCustomImage",conditionalRender:e==="static",cardProps:{title:"Use Local Image",type:"toggle",tooltip:P.default.createElement(P.default.Fragment,null,P.default.createElement("p",null,"Import an image from your device to use as the background."),p?.dataURL?P.default.createElement("div",null,P.default.createElement("img",{width:"20rem",src:p.dataURL,alt:`${p?.fileName} img`,style:{display:"block",width:"20rem",borderRadius:"0.5rem",border:"var(--border-thickness) var(--border-style, solid) var(--border-color, rgba(var(--spice-rgb-text), 0.125))"}}),p?.fileName?P.default.createElement("p",null,"File name: ",P.default.createElement("span",null,p.fileName)):null,p?.dateAdded?P.default.createElement("p",null,"Date Added: ",P.default.createElement("span",null,p.dateAdded)):null):null),settings:{checked:l,label:"Enable Local Image",onChange:b=>{b||c(),d(b)}}}},{id:"backgroundCustomImageInput",conditionalRender:e==="static"&&l,cardProps:{title:"Select Background Image",type:"input",tooltip:"Choose an image file from your device.",settings:{type:"file",label:"Choose File",onChange:b=>{let h=b?.[0];if(h){let I=new FileReader;I.readAsDataURL(h),I.onload=F=>{let oe=F.target?.result||"";w("Local Image Data URL:",oe),A(P.default.createElement("div",{style:{display:"flex",alignItems:"center"}},P.default.createElement("span",{style:{marginRight:"10px"}},"Successfully Added Local Image as background from File name:"),P.default.createElement("span",{style:{fontWeight:"bold"}},h.name))),u({dataURL:oe,fileName:h.name||"",dateAdded:new Date().toLocaleString()})}}}}}},{id:"dynamicColorToggle",conditionalRender:!0,cardProps:{title:"Dynamic Color",type:"toggle",tooltip:"Enable dynamic color to adjust colors based on current playing album art.",settings:{checked:o,label:"Dynamic Color Toggle",onChange:b=>{a(b),b&&A("Enabled Dynamic Color.")}}}}];return P.default.createElement($,{title:"Background Settings",description:"Set your Spotify interface settings."},Z(M))},vt=Mr;var O=g(m()),Ir=()=>{let{exportSettings:e,importSettings:r}=S(),[t,o]=(0,O.useState)(!1),n=(0,O.useRef)(null),i=()=>{o(d=>!d),t&&n.current&&(n.current.value="")},a=()=>{let d=n.current?.value.trim()||"{}";if(d==="{}"){A("Please enter valid JSON settings.",!0);return}r(d)};return O.default.createElement($,{title:"Settings Import/Export",description:"Manage your settings easily."},O.default.createElement(ke,null,O.default.createElement(me,{title:"Import and Export Settings",type:"normal",tooltip:"Use these buttons to import settings from a JSON file or export your current theme settings to your clipboard.",style:{display:"flex",gap:"0.5rem"}},O.default.createElement(H,{onClick:()=>{let d=e();navigator.clipboard.writeText(d).then(()=>{A("Settings exported to clipboard!")}).catch(c=>{C("Failed to copy: ",c),A("Failed to copy settings to clipboard.",!0)})}},"Export"),O.default.createElement(H,{onClick:i,variant:t?"danger":"primary"},t?"Cancel Import":"Import")),t&&O.default.createElement(me,{title:"Import Settings JSON",type:"normal",tooltip:"Paste your JSON settings here to import them. Ensure the JSON is correctly formatted.",style:{display:"flex",gap:"0.5rem"}},O.default.createElement(H,{onClick:async()=>{try{let d=await navigator.clipboard.readText();n.current&&(n.current.value=d,a()),A("Clipboard content pasted successfully!")}catch(d){C("Failed to read clipboard: ",d),A("Failed to read clipboard content.",!0)}}},"Paste And Import"),O.default.createElement(Ce,{ref:n,type:"text",label:"Paste JSON here",placeholder:"Paste JSON here"}),O.default.createElement(H,{onClick:a},"Import"))))},wt=Ir;var Ct=()=>Spicetify.Platform&&Spicetify.Platform.operatingSystem==="Windows"?!0:Spicetify.Platform?.PlatformData?.os_name?Spicetify.Platform.PlatformData.os_name.toLowerCase().includes("win"):!1,kt=()=>Spicetify?.Config.color_scheme==="light"||!1,Pt=()=>!!(document.querySelector(".globalNav")||document.querySelector(".Root__globalNav"));async function Mt(e){try{Spicetify?.Platform?.ControlMessageAPI?._updateUiClient?.updateTitlebarHeight({height:e}),Spicetify?.Platform?.UpdateAPI?._updateUiClient?.updateTitlebarHeight({height:e}),Spicetify.CosmosAsync.post("sp://messages/v1/container/control",{type:"update_titlebar",height:`${e}px`}),W(`Control height set to ${e}px`)}catch(r){C(`Error setting control height: ${e}`,r)}}function It(){return document.getElementById("customControls")?(document.querySelector(".lucid-transperent-window-controls")?.remove(),!0):!1}var xt="https://api.github.com/repos/sanoojes/spicetify-lucid/releases",Lt=".Root__main-view .os-viewport, .Root__main-view .main-view-container > .main-view-container__scroll-node:not([data-overlayscrollbars-initialize]), .Root__main-view .main-view-container__scroll-node > [data-overlayscrollbars-viewport]",Et="playlist-art-image-",Tt="playlist-view-",$e=Spicetify?.Platform?.version>="1.2.46",Nt=kt(),ee=Ct(),_t=Pt(),Pe=It();var L=g(m()),xr=()=>{let{interfaceSettings:{controlSettings:{height:e},fontSettings:{body:{fontFamily:r}},grainSettings:{grainEffect:t},pagesSettings:{isScrollMode:o,backgroundImageMode:n,playlistViewMode:i},borderSettings:{color:a,style:s,thickness:l,roundedRadius:d}},npvSettings:{mode:c,position:p,blur:u},setFont:f,setGrainEffect:k,setControlHeight:y,setPagesBackgroundImageMode:M,setPlaylistViewMode:b,setIsScrollMode:h,setNpvMode:I,setNpvBlur:F,setCompactNpvPosition:oe,setBorderColor:Uo,setBorderStyle:Fo,setBorderThickness:$o,settingAccessPosition:je,setRoundedBorderRadius:Vo,setSettingAccessPosition:Ho}=S(),[Ge,jo]=(0,L.useState)(t),[We,Go]=(0,L.useState)(n),[ze,Wo]=(0,L.useState)(i);return L.default.createElement($,{title:"Interface Settings",description:"Set your Spotify interface settings."},Z([{id:"controlSettings",conditionalRender:ee,cardProps:{title:"Set Control Height",tooltip:"Set the height of your window controls in pixels.",type:"input",settings:{type:"number",label:"Enter Control Height",defaultValue:e,onChange:v=>{y(Number(v))},settings:{step:1,min:1,max:64}}}},{id:"themeSettings",conditionalRender:!0,cardProps:{title:"Settings Access Position",tooltip:"Choose how to access settings: via the context menu button or a navigation button.",type:"dropdown",settings:{options:tt,placeholder:je,selectedValue:je,onChange:v=>{Ho(v)}}}},{id:"npvSettings",conditionalRender:!0,cardProps:{title:"Set Right Sidebar Mode",tooltip:L.default.createElement(L.default.Fragment,null,L.default.createElement("h3",{className:"encore-text encore-text-medium-bold"},"Select how the right sidebar appears during playback."),L.default.createElement("span",null,"Choose 'Compact' for a minimized view or 'Normal' for a detailed layout")),type:"dropdown",settings:{options:ot,placeholder:c,selectedValue:c,onChange:v=>{I(v)}}}},{id:"npvSettings",conditionalRender:c==="compact",cardProps:{title:"Set Compact Sidebar Position",tooltip:L.default.createElement(L.default.Fragment,null,L.default.createElement("h3",{className:"encore-text encore-text-medium-bold"},"Select where the right sidebar appears.")),type:"dropdown",settings:{options:rt,placeholder:p,selectedValue:p,onChange:v=>{oe(v)}}}},{id:"npvSettings",sectionName:"Styles",conditionalRender:c==="compact",cardProps:{title:"Set Npv Background Blur",type:"input",settings:{label:"Npv Background Blur input",defaultValue:u,onChange:v=>{F(Number(v))},type:"number",settings:{max:256,min:0,step:.5}}}},{id:"font",conditionalRender:!0,cardProps:{title:"Font",type:"input",tooltip:L.default.createElement(L.default.Fragment,null,"Supports both Google Fonts via URL and local fonts.",L.default.createElement("span",null,"For Google Fonts, use the full URL (e.g., https://fonts.googleapis.com/css2?family=Roboto). "),L.default.createElement("span",null,"For local fonts, type the font family name (e.g., 'Arial').")),settings:{type:"text",label:"Font Family or URL",defaultValue:r,onChange:v=>{f("body",pt(v.toString()))}}}},{id:"grains",conditionalRender:!0,cardProps:{type:"dropdown",title:"Grains",tooltip:"Choose a grain texture mode.",settings:{options:Xe,placeholder:Ge,selectedValue:Ge,onChange:v=>{jo(v),k(v)}}}},{id:"pageSettings",sectionName:"Pages Setting",conditionalRender:!0,cardProps:{type:"dropdown",title:"Pages Background Image",tooltip:"Choose a background image mode for playlist pages.",settings:{options:Ke,placeholder:We,selectedValue:We,onChange:v=>{Go(v),M(v)}}}},{id:"pageSettings",conditionalRender:!0,cardProps:{type:"dropdown",tooltip:"Sets the view mode for playlists.",title:"Playlist View",settings:{options:Qe,placeholder:ze,selectedValue:ze,onChange:v=>{Wo(v),b(v)}}}},{id:"pageSettings",conditionalRender:!0,cardProps:{title:"Toggle Playlist Scroll Mode",tooltip:"Enable or disable scrolling for the playlist art image.",type:"toggle",settings:{checked:o,label:"Scroll Mode Toggle",onChange:v=>{h(v)}}}},{id:"borderSettings",conditionalRender:!0,sectionName:"Border Settings",cardProps:{title:"Border Thickness",type:"input",settings:{type:"number",label:"Border Thickness",defaultValue:l,onChange:v=>{$o(Number(v))},settings:{step:1,min:0,max:8}}}},{id:"borderSettings",conditionalRender:!0,sectionName:"Border Settings",cardProps:{title:"Rounded Border Radius",type:"input",settings:{type:"number",label:"Rounded Border Radius",defaultValue:d,onChange:v=>{Vo(Number(v))},settings:{step:1,min:0,max:999}}}},{id:"borderSettings",conditionalRender:!0,cardProps:{title:"Border Color",type:"input",settings:{type:"text",label:"Border Color",defaultValue:a,onChange:v=>{Uo(v)}}}},{id:"borderSettings",conditionalRender:!0,cardProps:{title:"Border Style",type:"dropdown",settings:{options:et,selectedValue:s,onChange:v=>{Fo(v)}}}}]))},Bt=xr;var Me=g(m()),Lr=()=>{let{playbarSettings:{mode:e,styles:r},setPlaybarMode:t,updatePlaybarStyle:o}=S(),[n,i]=(0,Me.useState)(e),s=[{id:"playbarOption",conditionalRender:!0,cardProps:{title:"Playbar Option",type:"dropdown",settings:{placeholder:n,selectedValue:n,options:Ye,onChange:l=>{i(l),t(l)}}}},...he(r,e,o)];return Me.default.createElement($,{title:"Playbar Settings",description:"Set your Spotify Now Playing Bar settings."},Z(s))},At=Lr;var Ot=g(m()),Er=()=>{let{resetAllSettings:e}=S();return Ot.default.createElement($,{title:"Reset Settings",description:"Reset your theme settings."},Z([{id:"resetButtonCard",conditionalRender:!0,cardProps:{title:"Reset All Settings",type:"button",settings:{variant:"danger",size:"medium",children:"Reset",onClick:()=>{window.confirm("Are you sure you want to reset all settings to their default values? This action cannot be undone.")&&e()}}}}]))},Rt=Er;var R=g(m()),Tr={settings:!1,changelog:!1},Nr=()=>{let e=(0,R.createContext)(null);return{ModalContextProvider:({children:o})=>{let[n,i]=(0,R.useState)(Tr),a=(0,R.useCallback)(l=>{let d=n[l],c=(0,R.useCallback)(()=>{i(u=>({...u,[l]:!0}))},[l]),p=(0,R.useCallback)(()=>{i(u=>({...u,[l]:!1}))},[l]);return{isOpen:d,openModal:c,closeModal:p}},[n]),s=(0,R.useMemo)(()=>a,[a]);return R.default.createElement(e.Provider,{value:s},o)},useModal:o=>{let n=(0,R.useContext)(e);if(n)return n(o);throw new Error("Wrap Element with ModalContextProvider")}}},{ModalContextProvider:Dt,useModal:q}=Nr();var V=g(m()),_r=(0,V.memo)(()=>{let{isOpen:e,closeModal:r}=q("settings");return V.default.createElement(ye,{title:"Lucid Settings",onClose:r,isOpen:e},V.default.createElement("div",{className:"sections-container"},V.default.createElement(vt,null),V.default.createElement(Bt,null),V.default.createElement(At,null),V.default.createElement(Rt,null),V.default.createElement(wt,null)))}),Ut=_r;var Ie=g(m()),Br=()=>{w("hook running useSettingsAccess");let{settingAccessPosition:e}=S(),{openModal:r}=q("settings"),t=(0,Ie.useRef)(null);(0,Ie.useEffect)(()=>{if(e==="context-menu"&&(t.current=new Spicetify.Menu.Item("Lucid Settings",!1,r,'<svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="#fff"/></svg>'),t.current.register()),e==="nav"&&!document.querySelector(".main-actionButtons button[aria-label='Lucid Settings']")&&!(t.current instanceof HTMLButtonElement)){let o=new Spicetify.Topbar.Button("Lucid Settings",'<svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',r,!1,!0);t.current=o}return()=>{t.current instanceof Spicetify.Menu.Item&&t.current.deregister(),t.current instanceof Spicetify.Topbar.Button&&t.current.element.remove(),document.querySelector(".Root__globalNav .main-actionButtons div:has(button[aria-label='Lucid Settings'])")?.remove()}},[e,r])},Ft=Br;var ae=g(m()),Ar=(0,ae.memo)(()=>{w("Render <SettingsManager />");let{isOpen:e}=q("settings");return Ft(),ae.default.createElement(ae.default.Fragment,null,e&&ae.default.createElement(Ut,null))}),$t=Ar;var xe=(e,r)=>[e,r].filter(Boolean).join(" ").trim(),Le=e=>{if(!Object.keys(e).length)return{};let r={};return e.blur!==void 0&&(r.filter=xe(r.filter,`blur(${e.blur}px)`)),e.backdropBlur!==void 0&&(r.backdropFilter=`blur(${e.backdropBlur}px)`),e.contrast!==void 0&&(r.filter=xe(r.filter,`contrast(${e.contrast})`)),e.brightness!==void 0&&(r.filter=xe(r.filter,`brightness(${e.brightness})`)),e.saturation!==void 0&&(r.filter=xe(r.filter,`saturate(${e.saturation})`)),e.opacity!==void 0&&(r.opacity=e.opacity),e.width!==void 0&&(r.width=`${e.width}px`),e.height!==void 0&&(r.height=`${e.height}px`),(e.paddingX!==void 0||e.paddingY!==void 0)&&(r.padding=`${e.paddingY||0}px ${e.paddingX||0}px`),e.borderRadius!==void 0&&(r.borderRadius=`${e.borderRadius}px`),e.backgroundColor!==void 0&&(r.backgroundColor=`${e.backgroundColor}`),r},Ee=(e,r=!1)=>{if(!Object.keys(e).length)return r?"":{};let t={};return e.blur!==void 0&&(t["--blur"]=`${e.blur}px`),e.backdropBlur!==void 0&&(t["--backdrop-blur"]=`${e.backdropBlur}px`),e.contrast!==void 0&&(t["--contrast"]=e.contrast),e.brightness!==void 0&&(t["--brightness"]=e.brightness),e.saturation!==void 0&&(t["--saturation"]=e.saturation),e.width!==void 0&&(t["--width"]=`${e.width}px`),e.height!==void 0&&(t["--height"]=`${e.height}px`),e.paddingX!==void 0&&(t["--padding-x"]=`${e.paddingX}px`),e.borderRadius!==void 0&&(t["--border-radius"]=`${e.borderRadius}px`),e.backgroundColor!==void 0&&(t["--background-color"]=e.backgroundColor),e.time!==void 0&&(t["--time"]=`${e.time}s`),e.opacity!==void 0&&(t["--opacity"]=e.opacity),r?Object.entries(t).map(([o,n])=>`${o}: ${n};`).join(" "):t};var se=g(m()),Or=({style:e})=>se.default.createElement("div",{className:"animated-background-container",style:{...Ee(e)}},se.default.createElement("div",{className:"back"}),se.default.createElement("div",{className:"backleft"}),se.default.createElement("div",{className:"backright"}),se.default.createElement("div",{className:"front"})),Vt=Or;var Ht=g(m()),Rr=({style:e})=>Ht.default.createElement("div",{className:"solid-background",style:{...Le(e)}}),Ve=Rr;var Dr={underMainBackgroundImage:"",pageCategory:"other",artworkData:{nowPlayingArtURL:"",currentPageURI:"",currentPageArtURL:""},windowZoom:1},T=re(e=>({...Dr,updateArtworkData:r=>e(t=>({...t,artworkData:{...t.artworkData,...r}})),setPageCategory:r=>e(t=>({...t,pageCategory:r})),setUnderMainViewBackgroundImage:r=>e(t=>({...t,underMainBackgroundImage:r})),setIsCustomControls:r=>e(t=>({...t,isCustomControls:r})),setWindowZoom:r=>e(t=>({...t,windowZoom:r}))}));var jt=g(m()),Ur=({style:e})=>{let{backgroundSettings:{customBackgroundOverride:r}}=S(),{artworkData:t}=T(),{isUseLocalImage:o,selectedLocalImage:n}=ne(),i=(()=>{if(o&&n?.dataURL)return n.dataURL;let a=r.url;return a==="current-page"?t?.currentPageArtURL||t?.nowPlayingArtURL||"":!a||a.trim()===""||a==="now-playing"?t?.nowPlayingArtURL||"":a||""})();return jt.default.createElement("div",{className:"static-background",style:{backgroundImage:`url("${i}")`,...Le(e)}})},Gt=Ur;var Te=g(m()),Fr={animated:Vt,static:Gt,solid:Ve},$r=()=>{w("Render <BackgroundManager />");let{backgroundSettings:{mode:e,styles:r}}=S(),t=r[e],o=Fr[e];return Te.default.createElement("div",{className:"background-wrapper"},o?Te.default.createElement(o,{style:t}):Te.default.createElement(Ve,{style:{backgroundColor:"#202020"}}))},Wt=$r;var zt=async()=>{await(async()=>{for(;!Spicetify?.Player?.data;)await new Promise(n=>setTimeout(n,100))})();let{item:r}=Spicetify.Player.data;return!r||!r.metadata?(C("No item or metadata found in Spicetify Player data."),""):[r.metadata.image_xlarge_url,r.metadata.image_large_url,r.metadata.image_url,r.metadata.image_small_url].find(n=>n)||Vr()||""},Vr=()=>document.querySelector(".Root__right-sidebar .main-nowPlayingView-nowPlayingWidget .main-image-image")?.src||"",Hr=async e=>{let t=0;for(;t<=3;)try{let o=await Spicetify.GraphQL.Request({name:"queryArtistOverview",operation:"query",sha256Hash:"35648a112beb1794e39ab931365f6ae4a8d45e65396d641eeda94e4003d41497",value:null},{uri:e,includePrerelease:!0,locale:null});if(o)return o}catch(o){if(o instanceof Error&&o.message.includes("DUPLICATE_REQUEST_ERROR")&&t<3){t++,we(`Duplicate request detected (getArtistMetaData). Retrying in 1 second... (Attempt ${t})`),await new Promise(n=>setTimeout(n,1e3));continue}throw C("Error fetching artist metadata:",o),o}},jr=async e=>{let t=0;for(;t<=3;)try{let o=await Spicetify.GraphQL.Request({name:"getAlbum",operation:"query",sha256Hash:"469874edcad37b7a379d4f22f0083a49ea3d6ae097916120d9bbe3e36ca79e9d",value:null},{uri:e,locale:null,offset:0,limit:50});if(o)return o}catch(o){if(o instanceof Error&&o.message.includes("DUPLICATE_REQUEST_ERROR")&&t<3){t++,we(`Duplicate request detected (getAlbumMetaData). Retrying in 1 second... (Attempt ${t})`),await new Promise(n=>setTimeout(n,1e3));continue}throw C("Error fetching album metadata:",o),o}},Zt=e=>{let r=Spicetify.URI.isPlaylistV1OrV2(e),t=Spicetify.URI.isArtist(e),o=Spicetify.URI.isAlbum(e),n=Spicetify.URI.isShow(e),i=Spicetify.URI.isProfile(e);if(r||t||o||i||n){let a=e.match(/\/(?:playlist|artist|album|user|show)\/([^/]+)/)?.[1];return a?`spotify:${r?"playlist":t?"artist":o?"album":n?"show":"user"}:${a}`:(we("No ID found in pathname:",e),null)}return null},qt=async e=>{let r=e.split(":")[1];try{switch(r){case"playlist":case"show":return(await Spicetify.Platform.PlaylistAPI.getMetadata(e)).images.find(o=>o.url)?.url||null;case"artist":{let t=await Hr(e);return t.data?.artistUnion.visuals.headerImage?.sources?.[0]?.url||t.data?.artistUnion.visuals.avatarImage?.sources?.[0]?.url||null}case"album":{let t=await jr(e);return t.data?.albumUnion.coverArt.sources?.[2]?.url||t.data?.albumUnion.coverArt.sources?.[0]?.url||null}case"user":return(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/user-profile-view/v3").withPath(`/profile/${e.split(":")[2]}`).send())?.body?.image_url||null;default:return null}}catch(t){return C(`Error fetching artwork for ${r}:`,t),null}};var le=g(m()),Gr=()=>{w("Render <ArtworkManager />");let{pageCategory:e,artworkData:r,updateArtworkData:t}=T(),{interfaceSettings:{pagesSettings:o}}=S(),n=(0,le.useCallback)(async()=>{let i=Spicetify.Platform.History.location.pathname,a=Zt(i);if(r.currentPageURI!==a){document.documentElement.style.setProperty("--artwork-opacity","0");try{if(a){let s=await qt(a)||"";t({currentPageArtURL:s,currentPageURI:a})}else t({currentPageArtURL:"",currentPageURI:""})}catch(s){C("Error updating artwork:",s),t({currentPageArtURL:"",currentPageURI:""})}finally{setTimeout(()=>document.documentElement.style.setProperty("--artwork-opacity","1"),500)}}},[r.currentPageURI,t]);return(0,le.useEffect)(()=>{if(r.currentPageArtURL?(document.documentElement.style.setProperty("--playlist-art-image",`url(${r.currentPageArtURL})`),W(`Updated Playlist Artwork URL to ${r.currentPageArtURL}`)):r.currentPageURI&&e!=="other"&&(C(`No artwork URL found for URI: ${r.currentPageURI}`),document.documentElement.style.setProperty("--playlist-art-image","none")),o.backgroundImageMode==="inherit"){let i=Spicetify.Platform.History.listen(n);return n(),()=>{i()}}},[o.backgroundImageMode,r.currentPageArtURL,r.currentPageURI,e,n]),(0,le.useEffect)(()=>{r.nowPlayingArtURL&&(document.documentElement.style.setProperty("--now-playing-art-image",`url("${r.nowPlayingArtURL}")`),W(`Updated Now Playing Art View: ${r.nowPlayingArtURL}`))},[r.nowPlayingArtURL]),(0,le.useEffect)(()=>{let i=async()=>{let a=await zt();t({nowPlayingArtURL:a})};return i(),Spicetify.Player.addEventListener("songchange",i),()=>{Spicetify.Player.removeEventListener("songchange",i)}},[t]),null},Jt=Gr;var Yt=g(m()),Wr=()=>{let{interfaceSettings:{borderSettings:e}}=S();return(0,Yt.useEffect)(()=>{let t=(o=>Object.keys(o).length?Object.entries(o).map(([n,i])=>`--border-${n}: ${n==="thickness"||n==="roundedRadius"?`${i}px`:i};`).join(" "):"")(e);document.documentElement.style.cssText+=t},[e]),null},Xt=Wr;var Kt=({r:e,g:r,b:t})=>{e/=255,r/=255,t/=255;let o=Math.max(e,r,t),n=Math.min(e,r,t),i=o-n,a=0,s=0,l=(o+n)/2;return i!==0&&(s=l>.5?i/(2-o-n):i/(o+n),o===e?a=((r-t)/i+(r<t?6:0))*60:o===r?a=((t-e)/i+2)*60:a=((e-r)/i+4)*60),{h:Math.round(a),s:Math.round(s*100),l:Math.round(l*100)}},He=({r:e,g:r,b:t})=>`#${(16777216|e<<16|r<<8|t).toString(16).slice(1).toUpperCase()}`,Qt=({h:e,s:r,l:t})=>{let o=(1-Math.abs(2*t/100-1))*(r/100),n=o*(1-Math.abs(e/60%2-1)),i=t/100-o/2,a=0,s=0,l=0;return e>=0&&e<60?[a,s,l]=[o,n,0]:e>=60&&e<120?[a,s,l]=[n,o,0]:e>=120&&e<180?[a,s,l]=[0,o,n]:e>=180&&e<240?[a,s,l]=[0,n,o]:e>=240&&e<300?[a,s,l]=[n,0,o]:e>=300&&e<360&&([a,s,l]=[o,0,n]),{r:Math.round((a+i)*255),g:Math.round((s+i)*255),b:Math.round((l+i)*255)}};var Ne="lucid_dynamic_colors",ce=16,eo=16,to="dynamic_color_canvas",zr=()=>{let e=`${Ne}_will_change`,r=document.getElementById(e);r||(r=document.createElement("style"),r.id=e,document.head.appendChild(r)),r.innerText=`:root{
will-change: --spice-main,--spice-rgb-main,--spice-sidebar,--spice-rgb-sidebar,--spice-card,--spice-rgb-card,--spice-player,--spice-rgb-player,--spice-accent,--spice-rgb-accent,--spice-highlight,--spice-rgb-highlight,--spice-button,--spice-rgb-button,--spice-button-active,--spice-rgb-button-active,--spice-text,--spice-rgb-text,--spice-progress-bar,--spice-rgb-progress-bar,--spice-subtext,--spice-rgb-subtext,--spice-primary,--spice-rgb-primary,--spice-secondary,--spice-rgb-secondary,--spice-tertiary,--spice-rgb-tertiary;
transition: all 0.3s ease-in-out;
}`},Zr=async e=>{let r=document.getElementById(to);r||(r=document.createElement("canvas"),r.id=to),r.height=ce,r.width=ce;let t=r.getContext("2d",{willReadFrequently:!0});if(!t){C("Failed to create canvas context");return}let o,n=new Image;n.src=e;let i=async()=>{try{let a=await createImageBitmap(n,{resizeHeight:eo,resizeWidth:eo,resizeQuality:"pixelated"}),s=2,l=Math.floor(Math.random()*(ce-s)),d=Math.floor(Math.random()*(ce-s));t.drawImage(a,0,0,ce,ce);let p=t.getImageData(l,d,s,s).data,u={r:p[0],g:p[1],b:p[2]},f=Kt(u),k=He(u),y={rgb:u,hex:k,hsl:f};console.log(y),o=y}catch(a){console.error(a),C("Error processing image")}};return await new Promise((a,s)=>{n.onload=async()=>{await i(),a()},n.onerror=()=>{C("Failed to load image"),s("Failed to load image")}}),o},qr=e=>{let r=e.map(({name:o,color:n})=>[`--spice-${o}: ${n.hex} !important;`,`--spice-rgb-${o}: ${n.rgb.r},${n.rgb.g},${n.rgb.b} !important;`].join("")),t=document.getElementById(Ne);t||(t=document.createElement("style"),t.id=Ne,document.head.appendChild(t)),t.innerText=`:root {${r.join("")}}`,console.log(t)},oo=()=>{let e=document.getElementById(Ne);e&&e.remove()},ro=async e=>{zr();let r=await Zr(e);if(!r)return;let t=Jr(r.hsl),o={button:80,"selected-row":95,"button-active":80,player:20,misc:20,text:90,"main-elevated":20,subtext:95,shadow:0,main:20,highlight:20,sidebar:8,card:20,notification:20,"notification-error":80,"highlight-elevated":20,"button-disabled":20,accent:80,"tab-active":30},i=(a=>Object.keys(o).map(s=>{let l=o[s];return{name:s,color:{hex:a[l].hex,rgb:a[l].rgb}}}))(t);qr(i)},Jr=({h:e,s:r})=>{let t=[0,5,8,10,20,30,40,50,60,70,80,90,95,99,100],o={};for(let n of t){let i={h:e,s:r,l:n},a=Qt(i),s=He(a);o[n]={rgb:a,hex:s,hsl:i}}return o};var no=g(m()),Yr=()=>{w("Render <ColorManager />");let{colorSettings:{isDynamicColor:e}}=S(),{artworkData:r}=T(),{selectedLocalImage:t,isUseLocalImage:o}=ne();return(0,no.useEffect)(()=>{if(!e){oo();return}ro(o&&t?.dataURL?t.dataURL:r.nowPlayingArtURL)},[t,o,r.nowPlayingArtURL,e]),null},io=Yr;var ge=g(m()),Xr=()=>{let{interfaceSettings:{fontSettings:e}}=S(),r=(0,ge.useCallback)((o,n)=>{document.documentElement.style.setProperty(`--${o}-font-to-use`,n)},[]),t=(0,ge.useCallback)(async o=>{let{fontFamily:n,url:i}=e[o];try{await dt(i,`${o}-font`),r(o,n)}catch(a){C(`Failed to load font from ${i}`,a),r(o,n)}},[e,r]);return(0,ge.useEffect)(()=>{Object.keys(e).map(o=>t(o))},[e,t]),null},ao=Xr;var so=g(m()),_=e=>{(0,so.useEffect)(()=>{if(e)return document.body.classList.add(e),()=>{document.body.classList.remove(e)}},[e])};var Kr=()=>(w("Render <GlobalNavManager />"),_(_t?"global-nav":"control-nav"),null),lo=Kr;var co=g(m()),Qr=()=>{w("Render <GrainManager />");let{interfaceSettings:{grainSettings:{grainEffect:e}}}=S();return _(`grain-${e}`),co.default.createElement("div",{id:"grainEffect","data-grainEffect":e})},po=Qr;var en=()=>{let{npvSettings:{mode:e,position:r,blur:t}}=S();return document.body.style.setProperty("--compact-npv-blur",`${t}px`),_(`${e}-npv`),_(`${r}-npv`),null},uo=en;var mo=e=>Spicetify.URI.isPlaylistV1OrV2(e)?"playlist":Spicetify.URI.isArtist(e)?"artist":Spicetify.URI.isAlbum(e)?"album":Spicetify.URI.isGenre(e)?"genre":Spicetify.URI.isShow(e)?"show":Spicetify.URI.isSearch(e)?"search":Spicetify.URI.isProfile(e)?"profile":Spicetify.URI.isConcert(e)||Spicetify.URI.isArtistConcerts(e)?"concert":"other";var go=g(m()),tn=()=>{let{pageCategory:e,setPageCategory:r}=T();return _(e),(0,go.useEffect)(()=>{let t=()=>{let n=Spicetify.Platform.History.location.pathname;r(mo(n))};t();let o=Spicetify.Platform.History.listen(()=>{t()});return()=>{o()}},[r]),null},fo=tn;var _e=g(m()),yo=".Root__now-playing-bar",on=()=>{let{playbarSettings:e}=S(),r=(0,_e.useRef)(document.querySelector(yo));return _(`playbar-${e.mode}`),(0,_e.useEffect)(()=>{if(!r.current){C(`Playbar element with class '${yo}' not found!`);return}let{mode:t,styles:o}=e,n=Ee(o[t],!0),i=t==="compact"?o[t].height:r.current?.clientHeight||o[t]?.height;document.documentElement.style.setProperty("--playbar-height",`${i}px`),r.current.style.cssText=n.toString()},[e]),null},So=on;var fe=g(m()),rn=()=>{let{underMainBackgroundImage:e,setUnderMainViewBackgroundImage:r}=T(),t=(0,fe.useCallback)(o=>{let n=o.reduce((a,s)=>{if(a)return a;if(s.type==="childList"&&s.addedNodes.length>0){let l=s.addedNodes[0];if(l.firstChild instanceof HTMLDivElement)return l.firstChild}return null},null),i=null;n?.style?i=n.style.backgroundImage.replace(/url\(['"]?([^'"]*)['"]?\)/i,"$1"):e!==null&&(i=null),r(i)},[r,e]);(0,fe.useEffect)(()=>{let o=new MutationObserver(t),n=document.querySelector(".under-main-view");return n&&o.observe(n,{childList:!0}),()=>o.disconnect()},[t]),(0,fe.useEffect)(()=>(document.documentElement.style.setProperty("--under-main-view-art-image",e?`url(${e})`:null),()=>{document.documentElement.style.removeProperty("--under-main-view-art-image")}),[e])},bo=rn;var D=g(m()),nn=()=>{let{interfaceSettings:{pagesSettings:{playlistViewMode:e,isScrollMode:r,backgroundImageMode:t}}}=S(),{pageCategory:o,underMainBackgroundImage:n,artworkData:i}=T(),a=(0,D.useRef)(null),s=(0,D.useRef)(null);_(`${Tt}${e}`),_(`${Et}${t}`),_(`${n?"under-main-view-present":""}`);let l=(0,D.useCallback)(u=>{let{current:f}=a;if(f){let k=Math.min(u.scrollTop,window.innerHeight);f.style.transform=`translate3d(0, ${r?-k:0}px, 0)`,f.style.setProperty("--scroll",`${k/1e3}`)}},[r]),d=(0,D.useMemo)(()=>o!=="artist"&&!n?4:0,[o,n]);(0,D.useEffect)(()=>{let{current:u}=s;u&&u.style.setProperty("--blur",`${d}px`)},[d]),(0,D.useEffect)(()=>{let u=document.querySelector(Lt);if(u){let f=()=>l(u);return f(),u.addEventListener("scroll",f,{passive:!0}),()=>{u.removeEventListener("scroll",f)}}},[l]),w("New underMainBackgroundImage:",n);let c=o!=="other"&&t!=="none"?n||(t==="inherit"?i.currentPageArtURL||"":i.nowPlayingArtURL||""):"none",p=`playlist-art-container ${e} ${t}`;return D.default.createElement("span",{id:"playlistArtContainer",className:p,"data-playlist-view-mode":e,ref:a},D.default.createElement("div",{className:"background",ref:s,style:{backgroundImage:`url(${c})`}}),D.default.createElement("div",{className:"overlay",style:{height:"100%",width:"100%",position:"absolute",inset:0}}))},ho=nn;var de=g(m()),vo=()=>{let e=(0,de.useRef)(null);(0,de.useEffect)(()=>{let r=()=>{if(document.getElementById("lucid-under-main-view"))return;let o=document.createElement("div");o.id="lucid-under-main-view",o.className="lucid-under-main-view";let n=document.querySelector(".main-view-container");n&&n.prepend(o),e.current=o,e.current&&Spicetify.ReactDOM.createRoot(e.current).render(de.default.createElement(ho,null))};r();let t=Spicetify.Platform.History.listen(()=>{r()});return()=>{t()}},[])};var an=()=>(w("Render <UnderMainViewManager />"),vo(),bo(),null),wo=an;var J=g(m()),sn=()=>{let e=(0,J.useRef)(null),[r,t]=(0,J.useState)({}),{windowZoom:o}=T(),{interfaceSettings:{controlSettings:{height:n}}}=S();return(0,J.useEffect)(()=>{let i=()=>{if(ee)if(Mt(n),!Pe&&!Nt){let l=n||($e?32:64),d=$e?(n/o-Math.min(32/o,n/o))/2:0,c=l/o-d*2;window.document.body.style.setProperty("--top-bar-padding-start",`${(n<=16?8:64)/o}px`),window.document.body.style.setProperty("--top-bar-padding-end",`${(n<=16?8:135)/o}px`);let p={position:"fixed",right:0,top:`${d}px`,height:`${c}px`,width:`${135/o}px`,WebkitBackdropFilter:"brightness(2.12)",backdropFilter:"brightness(2.12)",pointerEvents:"none",zIndex:"var(--above-main-and-now-playing-view-grid-area, 6)"};t(p)}else t({})};i();let a=()=>{i()},s=setTimeout(i,1e3);return window.addEventListener("resize",a),()=>{clearTimeout(s),window.removeEventListener("resize",a)}},[o,n]),J.default.createElement("div",{ref:e,style:r})},Co=sn;var te=g(m()),ln=(0,te.memo)(()=>te.default.createElement(te.default.Fragment,null,ee?te.default.createElement("div",{id:"transperent-controls-container",style:{containerType:"normal",pointerEvents:"none"}},!Pe&&ee?te.default.createElement(Co,null):null):null)),ko=ln;var G=g(m()),cn=()=>{let e=(0,G.useRef)({outerWidth:window.outerWidth,innerWidth:window.innerWidth,ratio:window.devicePixelRatio}),{windowZoom:r,setWindowZoom:t}=T(),o=(0,G.useRef)(window.outerWidth),n=(0,G.useRef)(window.innerWidth),i=(0,G.useRef)(window.devicePixelRatio),a=(0,G.useRef)(!0),s=(0,G.useRef)(document.querySelector(".Root__main-view"));return(0,G.useEffect)(()=>{let l=()=>{document.documentElement.style.setProperty("--main-view-height",`${s.current?.clientHeight}px`);let c=window.outerWidth,p=window.innerWidth,u=window.devicePixelRatio;if(a.current||(o.current<=160||i.current!==u)&&(o.current!==c||n.current!==p)){let f=c/p||1;t(f),document.documentElement.style.setProperty("--zoom",`${f}`),w(`Zoom Updated: ${c} / ${p} = ${f}`),o.current=c,n.current=p,i.current=u}},d=()=>{l()};return l(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[t]),null},Po=cn;var B=g(m()),dn=()=>(w("Render <MainStateManager />"),B.default.createElement(B.default.Fragment,null,B.default.createElement(fo,null),B.default.createElement(po,null),B.default.createElement(io,null),B.default.createElement(Po,null),B.default.createElement(So,null),B.default.createElement(Jt,null),B.default.createElement(Xt,null),B.default.createElement(lo,null),B.default.createElement(ao,null),B.default.createElement(uo,null),B.default.createElement(wo,null),B.default.createElement(ko,null))),Mo=dn;function Io(e,r){e.innerHTML=`
    #lucid-main .background-container .background-wrapper div { z-index: ${r} !important; }
  `}function xo(e){e.innerHTML=`
    #lucid-main .background-container .background-wrapper div { z-index: -1 !important; }
  `}function Lo(e,r,t,o){let n=!1,i=null,a=new MutationObserver(()=>{let l=e.querySelector(r);l!==i&&(l&&!n?(W(`Applying background z-index: ${o}`),n=!0,Io(t,o)):n&&(W(`Removing background z-index: ${o}`),n=!1,document.querySelector("#lyrics-cinema .lyrics-lyrics-background, #lyrics-cinema .lyrics-lyrics-container")?Io(t,5):xo(t)),i=l)}),s={childList:!0};a.observe(e,s),xo(t)}var Eo=()=>{let e=document.getElementById("lucid-background-style");e||(e=document.createElement("style"),e.id="lucid-background-style",document.head.appendChild(e));let r=document.querySelector("#lyrics-cinema");r&&Lo(r,"#lyrics-cinema .lyrics-lyrics-background, #lyrics-cinema .lyrics-lyrics-container",e,5);let t=document.querySelector("#main .Root > div:last-child");t&&Lo(t,'.Root div[data-testid="fullscreen-mode-container"], .Root .npv-main-container',e,15)};var To=()=>{let{Locale:e}=Spicetify;function r(I){return I.replace(/[{0}{1}]/g,"").trim()}if(!e)return;let t=e.get("playlist.a11y.play")||"";t=r(t);let o=e.get("playlist.a11y.pause")||"";o=r(o);let n=e.get("play"),i=e.get("pause"),a=e.get("browse"),s=e.get("playback-control.skip-forward"),l=e.get("playback-control.skip-back"),d=e.get("tracklist.a11y.play")||"",c=e.get("view.web-player-home"),p=e.get("upgrade.tooltip.title")||"Upgrade to Premium",u,f;["zh-CN","zh-TW","am","fi"].includes(e.getLocale())?[u,f]=d.split("{1}"):[u,f]=d.split("{0}"),u=r(u),f=r(f);let k=e.get("playback-control.enable-repeat"),y=e.get("playback-control.enable-repeat-one"),M=e.get("playback-control.disable-repeat"),b="lucid_button_styles",h=document.getElementById(b);h||(h=document.createElement("style"),h.id=b,document.head.appendChild(h)),h.innerHTML=`
.Root__globalNav button[aria-label="${p}"],
.Root__globalNav button[title="${p}"] {
  display: none !important;
}

.main-repeatButton-button[aria-checked="false"],
.player-controls__right button[aria-label*="${k}"]  span{
  -webkit-mask-image: var(--repeat-off-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-off.svg"));
  mask-image: var(--repeat-off-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-off.svg"));
  background-color: var(--spice-subtext);
  mask-size: contain;
}

.main-repeatButton-button[aria-checked="mixed"],
.player-controls__right button[aria-label*="${M}"] span {
  -webkit-mask-image: var(--repeat-mixed-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-mixed.svg"));
  mask-image: var(--repeat-mixed-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-mixed.svg"));
  background-color: var(--spice-accent);
  mask-size: contain;
}

.main-repeatButton-button[aria-checked="true"],
.player-controls__right button[aria-label*="${y}"] span {
  -webkit-mask-image: var(--repeat-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat.svg"));
  mask-image: var(--repeat-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat.svg"));
  background-color: var(--spice-accent);
  mask-size: contain;
}

.player-controls__right button[aria-label*="${M}"] svg,
.player-controls__right button[aria-label*="${k}"] svg {
  transform: scale(1.15);
}

.player-controls__right button[aria-label*="${M}"] svg,
.player-controls__right button[aria-label*="${k}"] svg {
  visibility: hidden;
  opacity: 0;
}

.main-repeatButton-button {
  transform: scale(0.65) !important;
}

.player-controls__right, 
.player-controls__left {
    align-items: center;
}

.player-controls__buttons>button[aria-label*="${n}"] span,
.main-playButton-button[aria-label*="${n}"],
.main-playButton-PlayButton>button[aria-label*="${n}"]{
  background-color: var(--spice-text) !important;
  -webkit-mask-image: var(--play-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/play.svg")) !important;
  mask-image: var(--play-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/play.svg")) !important;
}

.main-playButton-button[aria-label*="${i}"],
.main-playButton-PlayButton>button[aria-label*="${i}"],
.main-playPauseButton-button[aria-label*="${i}"],
.player-controls__buttons>button[aria-label*="${i}"] span {
  background-color: var(--spice-text) !important;
  -webkit-mask-image: var(--pause-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/pause.svg")) !important;
  mask-image: var(--pause-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/pause.svg")) !important;
}

.Root__globalNav button:is([aria-label="Clear search field"]) {
  background-color: transparent !important;
  border: none !important;
}

button[aria-label="${a}"] path {
  display: none !important;
}

button[aria-label="${a}"] svg {
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-image: var(--compass-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/compass-outline.svg"));
  mask-image: var(--compass-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/compass-outline.svg"));
  background-color: var(--spice-subtext) !important;
  scale: 1.25;
}

.main-repeatButton-button[aria-label="${k}"],
.main-repeatButton-button[aria-label="${M}"],
.main-repeatButton-button[aria-label="${y}"],
{
scale: 0.75 !important;
background-color: var(--spice-subtext) !important;
color: var(--spice-subtext);

svg {
  display: none;
}
}

.player-controls__buttons>button[aria-label*="${n}"] span,
.player-controls__buttons>button[aria-label*="${i}"] span{
  display: block;
  mask-size: 100%;
  -webkit-mask-position: center center;
  mask-position: center center;
  background-color: var(--spice-subtext);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: cover;
  mask-size: cover;
  aspect-ratio: 1/1;
}

.main-playPauseButton-button,
.player-controls button[aria-label="${l}"],
.player-controls button[aria-label="${s}"]
{
  display: block;
  mask-size: 100%;
  -webkit-mask-position: center center;
  mask-position: center center;
  background-color: var(--spice-subtext);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: cover;
  mask-size: cover;
  min-height: 1rem;
  min-width: 1rem;
  aspect-ratio: 1/1;
  border-radius: 0 !important;
  border: none !important;
  height: var(--button-size, 24px);
  width: var(--button-size, 24px);
  
  svg,
  span {
    display: none;
    visibility: hidden;
  }
}

.player-controls__buttons>button[aria-label*="${n}"] span svg,
.player-controls__buttons>button[aria-label*="${i}"] span svg {
  display: none;
  visibility: hidden;
}

.player-controls button[aria-label="${l}"] span,
.player-controls button[aria-label="${s}"] span {
  opacity: 0;
}

.player-controls button[aria-label="${l}"] {
  background-color: var(--spice-text);
  -webkit-mask-image: var(--prev-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/prev.svg"));
  mask-image: var(--prev-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/prev.svg"));
}

.player-controls button[aria-label="${s}"] {
  background-color: var(--spice-text);
  -webkit-mask-image: var(--next-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/next.svg"));
  mask-image: var(--next-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/next.svg"));
}

.main-yourLibraryX-navLink[aria-label="${c}"] svg,
button[aria-label="${c}"] svg {
  path {
display: none !important;
  }

  mask-image: var(--home-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-outline.svg"));
  -webkit-mask-image: var(--home-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-outline.svg"));
  background-color: var(--spice-subtext) !important;
}


.main-yourLibraryX-navLink[aria-label="${c}"].active svg,
.main-globalNav-navLinkActive[aria-label="${c}"] svg {
  path {
display: none !important;
  }

  mask-image: var(--home-filled-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-filled.svg"));
  -webkit-mask-image: var(--home-filled-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-filled.svg"));
  background-color: var(--spice-text) !important;
}

.main-yourLibraryX-navLink[aria-label="${c}"].active svg {
  path {
display: none !important;
  }

  background-color: var(--spice-accent) !important;
}

#context-menu ul[aria-label*="Add to playlist menu"] {
  p {
max-width: 10rem;
  }
}
`};var U=g(m());var Y=g(m()),pn=({releases:e,isLoading:r,error:t})=>r?Y.default.createElement("div",null,"Loading release data..."):t?Y.default.createElement("div",null,"Error fetching release data: ",t.message):e?Y.default.createElement("div",{className:"lucid-changelog",id:"lucid-changelog"},e.map(o=>Y.default.createElement("div",{key:o.tag_name,className:"release"},Y.default.createElement("button",{className:"release-button",type:"button",onClick:()=>window.open(o.html_url,"_blank")},"View on GitHub"),o.body&&Y.default.createElement("div",{className:"release-content",dangerouslySetInnerHTML:{__html:o.body}})))):Y.default.createElement("div",null,"No release data found."),No=pn;var Be=g(m()),_o=(e,r)=>{let[t,o]=(0,Be.useState)(()=>{if(typeof window<"u"){let n=window.localStorage.getItem(e);return n?JSON.parse(n):r}return r});return(0,Be.useEffect)(()=>{typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(t))},[e,t]),[t,o]};async function Bo(e,r,t){try{let o={text:e,context:`${r}/${t}`,mode:"gfm"},n=await fetch("https://api.github.com/markdown",{method:"POST",body:JSON.stringify(o)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.text()}catch(o){return C("Error parsing markdown:",o),null}}var X=g(m()),un=({currentVersion:e})=>{let[r,t]=X.default.useState({isLoading:!0,error:null,releases:null}),[o,n]=_o("lucid:previousVersion",null),{closeModal:i,isOpen:a,openModal:s}=q("changelog"),l=async()=>{w("Fetching release data..."),t(c=>({...c,isLoading:!0}));try{let c=await fetch(xt||"https://api.github.com/repos/sanoojes/spicetify-lucid/releases");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);let p=await c.json();w("Fetched release data:",p);let u=await Promise.all(p.map(async k=>({...k,body:await Bo(k.body,"sanoojes","spicetify-lucid")||""})));t({isLoading:!1,error:null,releases:u});let f=p[0].tag_name;(o===null||f!==o)&&(console.log("Opening changelog modal because new version detected"),s())}catch(c){t(p=>({...p,isLoading:!1,error:c instanceof Error?c:new Error("Unknown error")})),C("Error fetching release data:",c)}};X.default.useEffect(()=>{l()},[]);let d=X.default.useCallback(()=>{i();let c=r.releases?.[0]?.tag_name;c&&n(c)},[i,r.releases,n]);return X.default.createElement(X.default.Fragment,null,X.default.createElement(ye,{title:"Lucid Changelog",onClose:d,isOpen:a},X.default.createElement(No,{releases:r.releases,isLoading:r.isLoading,error:r.error,currentVersion:e})))},Ao=un;var mn=()=>(w("Render <Main />"),(0,U.useEffect)(()=>{To(),Eo()},[]),U.default.createElement(U.default.Fragment,null,U.default.createElement("div",{id:"background-container",className:"background-container",style:{containerType:"normal"}},U.default.createElement(Wt,null)),U.default.createElement(Dt,null,U.default.createElement("div",{id:"modal-container",className:"modal-container",style:{containerType:"normal"}},U.default.createElement($t,null),U.default.createElement(Ao,null))),U.default.createElement("div",{id:"state"},U.default.createElement(Mo,null)),U.default.createElement(it,null))),Oo=mn;var Ro=g(m());async function gn(){try{for(;!Spicetify?.showNotification||!Spicetify?.Player||!Spicetify?.React||!Spicetify?.Platform;)await new Promise(r=>setTimeout(r,100));let e=document.getElementById("lucid-main");e||(e=document.createElement("div"),e.id="lucid-main",document.getElementById("main")?.prepend(e)),e&&!e.hasChildNodes()&&Spicetify.ReactDOM.createRoot(e).render(Ro.default.createElement(Oo,null)),console.log("%c Lucid ignited! \u{1F680}","font-weight: bold; font-size: 1.25rem; color: #2196F3; padding: 0.5rem 0;")}catch(e){Spicetify.showNotification(`[Lucid] Error Occurred: ${e instanceof Error?e.message:e}`,!0),C(e)}}var Do=gn;(async()=>await Do())();})();
})();